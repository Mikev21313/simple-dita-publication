name: Transform and Publish DITA # Original name

on:
  # Trigger the workflow on push to the main branch
  push:
    branches: [ main ]
  # Allow manual triggering from the Actions tab
  workflow_dispatch:

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest # Use the latest Ubuntu runner
    permissions:
      contents: write # Grant permission to write to the GitHub Pages branch

    steps:
      # Step 1: Check out the repository
      - name: Checkout repository
        uses: actions/checkout@v3

      # Step 2: Set up Java 17 (required for DITA-OT 4.0.2)
      - name: Set up Java
        uses: actions/setup-java@v3
        with:
          distribution: 'temurin' # Use Temurin distribution
          java-version: '17'     # Specify Java 17

      # Step 3: Download and set up DITA-OT
      # This step only downloads and unzips the standard DITA-OT
      - name: Set up DITA-OT
        run: |
          echo "Downloading DITA-OT 4.0.2..."
          wget https://github.com/dita-ot/dita-ot/releases/download/4.0.2/dita-ot-4.0.2.zip
          echo "Unzipping DITA-OT..."
          unzip